<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ä½“è‚²å™¨æå€Ÿé˜…ç³»ç»Ÿ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Orbitron:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta name="theme-color" content="#020617">
  </head>
  <body class="app-body">
    <div class="bg-grid" aria-hidden="true"></div>

    <header class="nav-shell">
      <div class="container nav-inner">
        <a class="brand" href="{{ url_for('index') }}">
          <span class="brand-mark"><i class="bi bi-lightning-charge"></i></span>
          <div>
            <div class="brand-title">ä½“è‚²å™¨æå€Ÿé˜…</div>
            <div class="brand-sub">Sports Gear Hub</div>
          </div>
        </a>
        <nav class="nav-links d-none d-lg-flex">
          <a href="{{ url_for('index') }}" class="nav-link {% if request.endpoint == 'index' %}active{% endif %}">é¦–é¡µ</a>
          <a href="{{ url_for('news_list') }}" class="nav-link {% if request.endpoint in ['news_list','news_detail'] %}active{% endif %}">èµ„è®¯</a>
          <a href="{{ url_for('catalog') }}" class="nav-link {% if request.endpoint == 'catalog' %}active{% endif %}">å™¨æ</a>
          <a href="{{ url_for('records') }}" class="nav-link {% if request.endpoint == 'records' %}active{% endif %}">è®°å½•</a>
          {% if current_user and current_user.is_admin %}
          <a href="{{ url_for('admin') }}" class="nav-link {% if request.endpoint.startswith('admin') %}active{% endif %}">ç®¡ç†</a>
          {% endif %}
        </nav>

        <div class="nav-actions">
          <form class="d-none d-xl-flex" method="get" action="{{ url_for('catalog') }}" role="search">
            <label class="search-pill">
              <i class="bi bi-search"></i>
              <input name="q" placeholder="æœç´¢å™¨æ / ä½¿ç”¨è€…" autocomplete="off">
            </label>
          </form>

          {% if current_user %}
          <a class="user-pill" href="{{ url_for('profile') }}">
            <span class="avatar">{{ current_user.username[:1]|upper }}</span>
            <span class="user-meta">
              <span class="user-name">{{ current_user.username }}</span>
              <span class="user-role">{{ 'ç®¡ç†å‘˜' if current_user.is_admin else 'å­¦ç”Ÿ' }}</span>
            </span>
          </a>
          <a class="btn btn-sm btn-outline-light d-none d-lg-inline-flex" href="{{ url_for('logout') }}">é€€å‡º</a>
          {% else %}
          <a class="btn btn-sm btn-outline-light me-2" href="{{ url_for('login') }}">ç™»å½•</a>
          <a class="btn btn-sm btn-primary" href="{{ url_for('register') }}">æ³¨å†Œ</a>
          {% endif %}

          <button id="theme-toggle-btn" class="btn btn-icon" type="button" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
          <button class="btn btn-icon d-lg-none" id="mobile-nav-toggle" type="button" aria-label="æ‰“å¼€å¯¼èˆª">
            <i class="bi bi-list"></i>
          </button>
        </div>
      </div>
      <div class="nav-glow" aria-hidden="true"></div>
    </header>

    <div class="mobile-nav-overlay" data-close-nav></div>
    <aside class="mobile-nav">
      <div class="mobile-nav-header">
        <div>
          <div class="text-muted small">å½“å‰è´¦æˆ·</div>
          {% if current_user %}
            <div class="fw-semibold">{{ current_user.username }}</div>
          {% else %}
            <div class="fw-semibold">æ¸¸å®¢</div>
          {% endif %}
        </div>
        <button class="btn btn-icon" data-close-nav aria-label="å…³é—­å¯¼èˆª"><i class="bi bi-x"></i></button>
      </div>
      <div class="mobile-nav-links">
        <a href="{{ url_for('index') }}">é¦–é¡µ</a>
        <a href="{{ url_for('news_list') }}">èµ„è®¯é€Ÿé€’</a>
        <a href="{{ url_for('catalog') }}">å™¨æç›®å½•</a>
        <a href="{{ url_for('records') }}">å€Ÿé˜…è®°å½•</a>
        {% if current_user %}
          <a href="{{ url_for('profile') }}">ä¸ªäººä¸­å¿ƒ</a>
          <a href="{{ url_for('logout') }}">é€€å‡ºç™»å½•</a>
        {% else %}
          <a href="{{ url_for('login') }}">ç™»å½•</a>
          <a href="{{ url_for('register') }}">æ³¨å†Œè´¦æˆ·</a>
        {% endif %}
        {% if current_user and current_user.is_admin %}
          <a href="{{ url_for('admin') }}">ç®¡ç†åå°</a>
        {% endif %}
      </div>
    </aside>

    <div id="flash-container" class="flash-stack container">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="alert alert-{{ 'success' if category=='success' else 'danger' }} alert-dismissible fade show glass-alert" role="alert">
              <span class="alert-icon"><i class="bi bi-info-circle"></i></span>
              <div>{{ msg }}</div>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}
    </div>

    {% block hero %}{% endblock %}

    <main class="container content-shell">
      {% block page_header %}{% endblock %}
      {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div>
          <div class="brand-mini">ä½“è‚²å™¨æå€Ÿé˜…ç³»ç»Ÿ</div>
          <p>ä¸€ç«™å¼æ ¡å›­ä½“è‚²å™¨æå€Ÿè¿˜å¹³å°ï¼Œå®æ—¶åº“å­˜ã€çº¿ä¸Šé¢„çº¦ã€æ™ºèƒ½æé†’ã€‚</p>
        </div>
        <div>
          <div class="footer-title">å¿«é€Ÿé“¾æ¥</div>
          <ul>
            <li><a href="{{ url_for('catalog') }}">å™¨æç›®å½•</a></li>
            <li><a href="{{ url_for('records') }}">å€Ÿé˜…è®°å½•</a></li>
            <li><a href="{{ url_for('profile') }}">ä¸ªäººä¸­å¿ƒ</a></li>
            {% if current_user and current_user.is_admin %}<li><a href="{{ url_for('admin') }}">ç®¡ç†åå°</a></li>{% endif %}
          </ul>
        </div>
        <div>
          <div class="footer-title">è”ç³»</div>
          <p>ä½“è‚²é¦†B1 Â· 010-12345678</p>
          <small class="text-muted">Â© {{ current_year if current_year else '2025' }} Sport Gear Ops</small>
        </div>
      </div>
    </footer>

    <button class="back-to-top" type="button" aria-label="è¿”å›é¡¶éƒ¨">
      <i class="bi bi-arrow-up"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
